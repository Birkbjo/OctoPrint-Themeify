!function(e){function t(o){if(n[o])return n[o].exports;var s=n[o]={i:o,l:!1,exports:{}};return e[o].call(s.exports,s,s.exports,t),s.l=!0,s.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,n){n(1),e.exports=n(2)},function(e,t,n){"use strict";function o(e){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}$(function(){function e(e){ko.extenders.stripQuotes=function(e,t){var n=ko.pureComputed({read:e,write:function(t){var n=t.replace(/['"]+/g,"");e(n)}}).extend({notify:"always"});return n(e()),n};var t=this;t.classId="themeify",t.settings=e[0],t.ownSettings={},t.customRules=[],t.customizedElements=[],t.builtInElements=[],t._ownSettingsPrev={},t.configSubscriptions={enabled:"",theme:""},t.tabIcons={},t.oldTabContent={};var n=function(e){return t._ownSettingsPrev[e]};t.onStartupComplete=function(){var e=$("html").attr("id");e&&"touch"==e&&$("html").removeClass(t.classId),t.updateColors(),t._updateCustomRules()},t.setupIcons=function(){t.tabIcons.tabs().filter(function(e){return e.domId()&&e.enabled()}).map(function(e,n){var o=e.domId,s=(e.enabled,e.faIcon),u=$("<i>",{class:s()}),l=$("".concat(o()," a"));l&&"tabs"===l.closest("ul").attr("id")?(t.oldTabContent[o()]=$("".concat(o()," a")).html(),l.html(u)):console.warn("Themeify: Failed to add icon! ".concat(o()," is not a child of the tab-list!"))})},t.restoreTabs=function(){t.tabIcons.tabs().filter(function(e){return e.domId()}).map(function(e,n){var o=e.domId,s=(e.enabled,e.faIcon,t.oldTabContent[o()]);s&&$("".concat(o()," a")).html(s)})},t.enableBeforeLoaded=function(){var e=localStorage.getItem("theme");e&&$("html").addClass(t.classId).addClass(e)},t.enable=function(){if(t.ownSettings.enabled()&&"touch"!==$("html").attr("id")){var e=t.ownSettings.theme();localStorage.setItem("theme",e),$("html").addClass(t.classId).addClass(t.ownSettings.theme())}},t.addNewCustomRule=function(){var e={selector:ko.observable("").extend({stripQuotes:!0}),rule:ko.observable("").extend({stripQuotes:!0}),value:ko.observable(""),enabled:ko.observable(!0)};t._subscribeToDictValues(e,"customRules"),t.ownSettings.customRules.push(e)},t.addNewIcon=function(){var e={domId:ko.observable("").extend({stripQuotes:!0}),enabled:ko.observable(!0),faIcon:ko.observable("")};t._subscribeToDictValues(e,"tabs",t.onIconChange),t.tabIcons.tabs.push(e)},t.onBeforeBinding=function(){t.settings=t.settings.settings,t.ownSettings=t.settings.plugins.themeify,t.customRules=t.ownSettings.customRules.extend({rateLimit:50}),t.onRuleToggle=t.onRuleToggle,t.tabIcons={enabled:t.ownSettings.tabs.enableIcons,tabs:t.ownSettings.tabs.icons},t.tabIcons.enabled()&&t.setupIcons(),t.enable(),t._copyOwnSettings()},t.updateColors=function(){t._removeBuiltInStyles(),t.ownSettings.enableCustomization()&&t.ownSettings.color().filter(function(e){return!!e.enabled()}).map(function(e,n){t._applyRule(e,!0)})},t._updateCustomRules=function(){t._removeCustomStyles(),t.updateColors(),t.ownSettings.enableCustomization()&&t.ownSettings.customRules().filter(function(e){return!!e.enabled()}).map(function(e){t._applyRule(e)})},t.getStyleRuleIndexByCssText=function(e,t){t=t.replace(/\s/g,"");for(var n=0;n<e.length;n++)if(e[n].cssText.replace(/\s/g,"")==t)return n},t._applyRule=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=window.document.styleSheets[0],s=o.insertRule(e.selector()+"{ "+e.rule()+": "+e.value()+"; }",o.cssRules.length);n?t.builtInElements.push({ruleID:s,rule:e,cssText:o.cssRules[s].cssText}):t.customizedElements.push({ruleID:s,rule:e,cssText:o.cssRules[s].cssText})},t.clone=function(e){if("function"==typeof e)return e();if(null===e||"object"!==o(e)||"isActiveClone"in e)return e;if(e instanceof Date)var n=new e.constructor;else var n=e.constructor();for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(e.isActiveClone=null,n[s]=t.clone(e[s]),delete e.isActiveClone);return n},t._copyOwnSettings=function(){Object.keys(t.ownSettings).forEach(function(e,n){t._ownSettingsPrev[e]=t.clone(t.ownSettings[e])})},t.onChange=function(e,n){t.updateColors(),t._copyOwnSettings()},t.onColorChange=function(e,n){t.updateColors(),t._copyOwnSettings()},t.onCustomRuleChange=function(e){t.updateColors(),e.rule()&&e.selector()&&e.value()&&t._updateCustomRules()},t.onThemeChange=function(e){var o=n("theme");(function(e){return $("html").hasClass(e)})(e)||(localStorage.setItem("theme",e),$("html").addClass(e).removeClass(o)),t._copyOwnSettings()},t.onEnabledChange=function(e){if(e&&"touch"!==$("html").attr("id")){var n=t.ownSettings.theme();$("html").addClass(t.classId).addClass(n),localStorage.setItem("theme",n)}else $("html").removeClass(t.classId),localStorage.setItem("theme",!1);t._copyOwnSettings()},t.onEnableCustomizationChange=function(e){e?(t.updateColors(),t._updateCustomRules()):(t._removeBuiltInStyles(),t._removeCustomStyles()),t._copyOwnSettings()},t.onIconsEnableChange=function(e){e?t.setupIcons():t.restoreTabs()},t.onIconChange=function(e,n,o){t.tabIcons.enabled()&&("enabled"!==o||n||t.restoreTabs(),t.setupIcons())},t._removeCustomStyles=function(){var e=window.document.styleSheets[0];t.customizedElements.forEach(function(n){return e.deleteRule(t.getStyleRuleIndexByCssText(e.cssRules,n.cssText))}),t.customizedElements=[]},t._removeBuiltInStyles=function(){var e=window.document.styleSheets[0];t.builtInElements.forEach(function(n){return e.deleteRule(t.getStyleRuleIndexByCssText(e.cssRules,n.cssText))}),t.builtInElements=[]},t._removeCustomStylesByRule=function(e){customizedElement=t.customizedElements.find(function(t){return t.rule==e});var n=window.document.styleSheets[0];n.deleteRule(t.getStyleRuleIndexByCssText(n.cssRules,customElement.cssText))},t.onRuleToggle=function(e){e.enabled(!e.enabled())},t.ruleIsDeleteable=function(e){return!e.deletable||"function"!=typeof e.deletable||e.deletable()},t.onCustomRuleDelete=function(e){t.ruleIsDeleteable(e)&&(t.customRules.remove(e),t._updateCustomRules())},t.onIconDelete=function(e){t.restoreTabs(),t.tabIcons.tabs.remove(e),t.setupIcons()},t._subscribeToDictValues=function(e,n,o){var s=o?o.bind(this,e):t.onCustomRuleChange.bind(this,e);Object.keys(e).map(function(o){t.configSubscriptions[n].push(e[o].subscribe(function(e){return s(e,o)}))})},t.onSettingsShown=function(){var e=this;Object.keys(t.ownSettings).map(function(n,o){if("customRules"==n)t.configSubscriptions[n]=[],t.customRules().map(function(e,o){t._subscribeToDictValues(e,n)});else if("color"==n){t.configSubscriptions[n]=[];var s=t.onColorChange;t.ownSettings.color().map(function(e,o){t._subscribeToDictValues(e,n,s)})}else if("tabs"==n){var u=t.configSubscriptions[n]=[],l=t.tabIcons,i=l.enabled,a=l.tabs;u.push(i.subscribe(t.onIconsEnableChange)),a().map(function(e,o){t._subscribeToDictValues(e,n,t.onIconChange)})}else{var c=t.configOnChangeMap[n]?t.configOnChangeMap[n]:t.onChange.bind(e,n);t.configSubscriptions[n]=t.ownSettings[n].subscribe(c)}})},t.onSettingsHidden=function(){Object.keys(t.configSubscriptions).map(function(e,n){Array.isArray(t.configSubscriptions[e])?t.configSubscriptions[e].forEach(function(e){e.dispose()}):t.configSubscriptions[e].dispose()})},t.enableBeforeLoaded(),t.configOnChangeMap={enabled:t.onEnabledChange,theme:t.onThemeChange,enableCustomization:t.onEnableCustomizationChange}}OCTOPRINT_VIEWMODELS.push([e,["settingsViewModel"],["#settings_plugin_themeify"]])})},function(e,t){}]);